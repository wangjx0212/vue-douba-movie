(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c9f6fbf"],{"197a":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"square"},[e("div",{staticClass:"bg"},[e("img",{staticClass:"bg-image",attrs:{src:t.pic}}),e("div",{staticClass:"other"},[e("div",{staticClass:"views"},[t._v(t._s(t.views))]),e("div",{staticClass:"replies"},[t._v(t._s(t.replies))])])]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.datalist,(function(a,i){return e("div",{key:i,staticClass:"list"},[1==a.ad?e("div",{staticClass:"ad-box"},[e("img",{attrs:{src:a.data}}),e("span",{},[t._v("广告")])]):t._e(),1!=a.ad?e("div",[e("div",{staticClass:"header"},[e("div",{staticClass:"avatar-box"},[e("img",{staticClass:"portrait_img",attrs:{src:a.avatar,alt:""}}),1==a.is_ident_icon?e("img",{staticClass:"isvip",attrs:{src:s("7637")}}):t._e()]),e("div",{staticClass:"header_center",on:{click:function(s){return t.handleToDetails(a.tid)}}},[e("span",{staticClass:"header_center_name"},[t._v(t._s(a.author))]),e("div",{staticClass:"header_center_label"},[e("div",{staticClass:"label_grade"},[1==a.is_carvip?e("img",{staticClass:"label_grade_img",class:{opacity_0:1!=a.is_carvip},attrs:{src:1==a.is_carvip?t.icon_iscarvip:"",alt:""}}):t._e(),e("span",{staticClass:"label_grade_name"},[t._v(t._s(a.level))])]),e("div",{staticClass:"label_heat"},[e("img",{staticClass:"label_heat_img",attrs:{src:t.icon_label_d,alt:""}}),e("span",{staticClass:"label_grade_name"},[t._v(t._s(a.extcredits2)+"°")])])])]),e("van-icon",{staticClass:"more",attrs:{size:"30px",name:"ellipsis"},on:{click:function(s){return t.handleMore(a)}}})],1),e("div",{staticClass:"content",on:{click:function(s){return t.handleToDetails(a.tid)}}},[e("div",{class:t.showTotal?"total-introduce":"detailed-introduce"},[e("div",{ref:"desc",refInFor:!0,staticClass:"intro-content",attrs:{title:a.message}},[a.message?e("span",{staticClass:"merchant-desc"},[e("span",{staticClass:"name"},[t._v(t._s(a.class_name))]),t._v(t._s(a.message))]):t._e(),t.showExchangeButton?e("div",{staticClass:"unfold",on:{click:t.showTotalIntro}},[e("p",[t._v(t._s(t.exchangeButton?"展开":"收起"))]),e("img",{attrs:{src:t.exchangeButton?t.down:t.up,alt:""}})]):t._e()])])]),2==a.attachment?e("div",{staticClass:"img"},[4==a.image_list.length?e("div",[e("div",[e("img",{staticClass:"img_content",attrs:{src:a.image_list[0]},on:{click:function(s){return t.ImagePreview(a.image_list,0)}}}),e("img",{staticClass:"img_content",attrs:{src:a.image_list[1]},on:{click:function(s){return t.ImagePreview(a.image_list,1)}}})]),e("div",[e("img",{staticClass:"img_content",attrs:{src:a.image_list[2]},on:{click:function(s){return t.ImagePreview(a.image_list,2)}}}),e("img",{staticClass:"img_content",attrs:{src:a.image_list[3]},on:{click:function(s){return t.ImagePreview(a.image_list,3)}}})])]):e("div",t._l(a.image_list,(function(s,i){return e("img",{key:i,staticClass:"img_content",class:{img_content_1:1==a.image_list.length},attrs:{src:s,alt:""},on:{click:function(s){return t.ImagePreview(a.image_list,i)}}})})),0)]):t._e(),1==a.attachment?e("div",{staticClass:"video",class:{video_1:1==a.video_heng_shu,video_2:0==a.video_heng_shu}},[e("video",{attrs:{src:a.video,poster:a.image_list[0],"x5-video-player-type":"h5","x5-video-orientation":"landscape|portrait",controls:"controls"}})]):t._e(),e("div",{staticClass:"usage"},[e("span",{staticClass:"time"},[t._v(t._s(t._f("timeformat")(a.timestamp)))]),e("div",{staticClass:"news"},[e("div",{staticClass:"usage_news",on:{click:function(s){return t.handleToDetails(a.tid)}}},[e("img",{staticClass:"usage_news_img",attrs:{src:s("0af8"),alt:""}}),e("span",[t._v(t._s(a.replies))])]),e("div",{staticClass:"usage_news",on:{click:function(s){return t.addZan(a,1)}}},[1==a.is_zan?e("img",{staticClass:"usage_news_img",attrs:{src:s("5545"),alt:""}}):e("img",{staticClass:"usage_news_img",attrs:{src:s("cf38"),alt:""}}),e("span",[t._v(t._s(a.zan))])]),e("div",{staticClass:"usage_news usage_news_right",on:{click:function(s){return t.addZan(a,2)}}},[2==a.is_zan?e("img",{staticClass:"usage_news_img",attrs:{src:s("b6bc"),alt:""}}):e("img",{staticClass:"usage_news_img",attrs:{src:s("cd5d"),alt:""}}),e("span",[t._v(t._s(a.cai))])])])]),!a.post||a.post.length?e("div",{staticClass:"information",on:{click:function(s){return t.handleToDetails(a.tid)}}},t._l(a.post,(function(a,s){return e("div",{key:s,staticClass:"information_text"},[e("span",{staticClass:"information_title"},[t._v(t._s(a.author)+"：")]),e("span",{staticClass:"information_content"},[t._v(t._s(a.message))])])})),0):t._e()]):t._e()])})),0),e("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{select:t.onSelect,cancel:t.onCancel},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}})],1)},i=[],n=(s("99af"),s("b0c0"),s("acd8"),s("e25e"),s("ac1f"),s("5319"),s("284c")),c=s("28a2"),o=s("d399"),l=s("d383"),r={props:["itemdata"],data:function(){return{pic:"",views:"",replies:"",name:this.$route.query.name,down:s("43f4"),up:s("2a0a"),icon_iscarvip:s("da34"),icon_label_d:s("e939"),show:!1,loading:!1,selectActionItem:null,finished:!1,actions:[{name:"私聊"},{name:"关注"}],showTotal:!0,exchangeButton:!1,showExchangeButton:!1,introduce:"",datalist:[],allpage:-1,parameter:{token:this.$store.state.userData,type:0,typeid:this.$route.query.typeid,order:0,page_size:10,page_index:0}}},watch:{introduce:function(){this.$nextTick(function(){var t=parseFloat(this.getRem());if(this.$refs.desc){var a=window.getComputedStyle(this.$refs.desc).height.replace("px","");a>5.25*t?(this.showExchangeButton=!0,this.exchangeButton=!0,this.showTotal=!1):(this.showExchangeButton=!1,this.showTotal=!0)}}.bind(this))}},mounted:function(){document.title="E区专题",this.squaresItem()},methods:{handleToDetails:function(t){var a="".concat(this.$store.state.indexUrl+"square/details?tid="+t+"&"+this.$store.state.appParams);if(this.$store.state.userData){var s={url:a,share:"0",keyboard:"1"};window.location.href="teldapp://newWebview?params="+JSON.stringify(s)}else{var e=document.createElement("frame");e.src="teldapp://login",document.documentElement.childNodes[0].appendChild(e)}},onClickLeft:function(){this.$router.go(-1)},onLoad:function(){this.datalist.length&&(this.parameter.page_index++,this.squaresItem()),this.parameter.page_index==this.allpage&&(this.finished=!0)},ImagePreview:function(t,a){Object(c["a"])({images:t,startPosition:a})},addZan:function(t,a){var s=t.tid,e=this.$store.state.userData;o["a"].loading({message:"加载中...",forbidClick:!0}),this.api.addZan({token:e,tid:s,type:a}).then((function(s){o["a"].clear(),0==s.err_code?(1==t.is_zan?1==a?(t.zan=parseInt(t.zan)-1,t.is_zan=0):2==a&&(t.is_zan=a,t.zan=parseInt(t.zan)-1,t.cai=parseInt(t.cai)+1):2==t.is_zan?1==a?(t.is_zan=a,t.zan=parseInt(t.zan)+1,t.cai=parseInt(t.cai)-1):2==a&&(t.is_zan=0,t.cai=parseInt(t.cai)-1):(1==a?t.zan=parseInt(t.zan)+1:2==a&&(t.cai=parseInt(t.cai)+1),t.is_zan=a),t.is_zan):Object(o["a"])(s.err_msg)}))},squaresItem:function(){var t=this;this.api.squaresItem(this.parameter).then((function(a){0==a.err_code&&(t.allpage=a.data.total_page,t.pic=a.data.banner,t.views=a.data.views,t.replies=a.data.replies,t.datalist=[].concat(Object(n["a"])(t.datalist),Object(n["a"])(a.data.thread))),t.loading=!1}))},showTotalIntro:function(){this.showTotal=!this.showTotal,this.exchangeButton=!this.exchangeButton},getRem:function(){var t=16,a=window.innerWidth,s=a/375*t;return s},handleClickAll:function(){this.dispalyAll=!0},handleClick:function(){this.dispalyAll=!1},addFollow:function(t){this.api.addFollow({followuid:t,token:this.$store.state.userData}).then((function(t){0==t.err_code&&Object(o["a"])(t.data.msg)}))},onSelect:function(t){switch(t.name){case"关注":this.addFollow(this.selectActionItem.authorid);break;case"取消关注":this.addFollow(this.selectActionItem.authorid);break;case"私聊":var a="".concat(this.$store.state.indexUrl+"other/wechat?uid="+this.selectActionItem.authorid+"&name="+this.selectActionItem.author+"&"+this.$store.state.appParams),s={url:a,share:"0",keyboard:"1"};window.location.href="teldapp://newWebview?params="+JSON.stringify(s);break}this.show=!1},onCancel:function(){this.show=!1},isFollow:function(t){var a=this;this.api.isFollow({uid:t,token:this.$store.state.userData}).then((function(t){if(0==t.err_code){switch(t.data.status){case 0:a.actions[1].name="关注";break;case 1:a.actions[1].name="取消关注";break;case 2:a.actions[1].name="取消关注";break}a.$nextTick((function(){a.show=!0}))}}))},handleMore:function(t){if(!this.$store.state.userData){console.log('window.location.href= "teldapp://login"');var a=document.createElement("frame");return a.src="teldapp://login",document.documentElement.childNodes[0].appendChild(a),null}this.selectActionItem=t,this.isFollow(t.authorid)}},filters:{timeformat:function(t){return t?Object(l["b"])(1e3*t):""}}},d=r,h=(s("8b9d"),s("2877")),u=Object(h["a"])(d,e,i,!1,null,"69be4b5c",null);a["default"]=u.exports},"8b9d":function(t,a,s){"use strict";var e=s("ce94"),i=s.n(e);i.a},ce94:function(t,a,s){}}]);
//# sourceMappingURL=chunk-1c9f6fbf.1aa5d9c2.js.map